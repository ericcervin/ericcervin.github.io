<!DOCTYPE html>
<html lang="en">
  <head>
    <title>cattv_20170324</title>
    <meta charset="UTF-8">
    <script language="javascript" type="text/javascript" src="./libraries/p5.min.js"></script>
  </head>
  <body>
  <script type="text/javascript">
 
//based on Repeat: Recursive Tree
//from Form+Code in Design, Art, and Architecture by Reas, etc.

dotSize = 12;                             //size of starting dot to taper from
display_width = 1200;                     //width of the display window
display_height = 600;                    //height of the display window
frame_rate = 24;                          //frames/second

var angleOffsetA, angleOffsetB;

function setup(){
    
    createCanvas(display_width,display_height);
    noStroke();
    frameRate(frame_rate);
    angleOffsetA = radians(1);
    angleOffsetB = radians(45);
 }
 
     
function draw(){
    r = random(0,1.0);
    if (r < 0.04){
        fill(0);
        background(255);
    } else {
        fill(255);
        background(0);
    }
    translate(width/1.1,height);
    seed1(dotSize,radians(270),0,0);
}

function seed1(dotSize, angle, x, y){
    if (dotSize > 1.0){
        r = random(0,1.0);
        if (r > 0.02){
            ellipse(x,y,dotSize,dotSize);
            newx = x + cos(angle) * dotSize;
            newy = y + sin(angle) * dotSize;
            seed1(dotSize * 0.99, angle - angleOffsetA,newx,newy);
        } else {
            ellipse(x,y,dotSize,dotSize);
            newx = x + cos(angle);
            newy = y + sin(angle);
            seed2(dotSize * 0.99, angle + angleOffsetA,newx,newy);
            seed1(dotSize * 0.60, angle + angleOffsetB,newx,newy);
            seed2(dotSize * 0.50, angle - angleOffsetB,newx, newy);
         }
      }
}
            
function seed2(dotSize, angle, x, y){
    if (dotSize > 1.0){
        r = random(0,1.0);
        if (r > 0.05){
            ellipse(x,y,dotSize,dotSize);
            newx = x + cos(angle) * dotSize;
            newy = y + sin(angle) * dotSize;
            seed2(dotSize * 0.99, angle + angleOffsetA,newx,newy);
        } else {
            ellipse(x,y,dotSize,dotSize);
            newx = x + cos(angle);
            newy = y + sin(angle);
            seed1(dotSize * 0.99, angle + angleOffsetA,newx,newy);
            seed2(dotSize * 0.60, angle + angleOffsetB,newx,newy);
            seed1(dotSize * 0.50, angle - angleOffsetB,newx, newy);    
      }
  }
  }
  </script>
  </body>
  
</html>
 
